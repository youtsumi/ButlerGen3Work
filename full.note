butler write-curated-calibrations /sdf/group/lsst/camera/IandT/repo_gen3/spot_test_v2 LSSTCam

pipetask run \
    -d "instrument ='LSSTCam' AND exposure.observation_type = 'bias' AND exposure.science_program IN ( '12781' ) AND detector in ( 28, 29, 96 )" \
    -b /sdf/group/lsst/camera/IandT/repo_gen3/spot_test_v2 \
    -i LSSTCam/raw/all \
    -o u/youtsumi/calib/bias/run_12781 \
    -p /gpfs/slac/lsst/fs1/g/data/youtsumi/Spot/cpBias.yaml \
    --register-dataset-types \
    -j 8

# this didn't work. Jim helped me: https://lsstc.slack.com/archives/C01FBUGM2CV/p1621989826197900?thread_ts=1621964161.169400&cid=C01FBUGM2CV

butler certify-calibrations /sdf/group/lsst/camera/IandT/repo_gen3/spot_test_v2 u/jchiang/calib/bias/run_12781/20210525T184949Z /calib/run_12781 bias

pipetask run -d "instrument ='LSSTCam' AND exposure.observation_type = 'dark' AND exposure.science_program IN ( '12783' ) AND detector in ( 28, 29, 96 ) " \
    -b /sdf/group/lsst/camera/IandT/repo_gen3/spot_test_v2 \
    -i LSSTCam/raw/all,LSSTCam/calib,/calib/run_12781 \
    -o u/youtsumi/calib/dark/run_12781 \
    -p /gpfs/slac/lsst/fs1/g/data/youtsumi/Spot/cpDark.yaml \
    --register-dataset-types \
    -j 8

butler certify-calibrations /sdf/group/lsst/camera/IandT/repo_gen3/spot_test_v2 u/youtsumi/calib/dark/run_12781 /calib/run_12781 dark

pipetask run -d "instrument ='LSSTCam' AND exposure.observation_type = 'bias' AND exposure.science_program IN ( '12781' ) AND detector in ( 28, 29, 96 )" \
    -b /sdf/group/lsst/camera/IandT/repo_gen3/spot_test_v2 \
    -i LSSTCam/raw/all,LSSTCam/calib,/calib/run_12781 \
    -o u/youtsumi/calib/defects/run_12781  \
    -p /gpfs/slac/lsst/fs1/g/data/youtsumi/Spot/findDefects.yaml \
    --register-dataset-types \
    -j8
    
butler certify-calibrations /sdf/group/lsst/camera/IandT/repo_gen3/spot_test_v2 u/youtsumi/calib/defects/run_12781 /calib/run_12781 defects

PYTHONPATH=mixcoatl/python:$PYTHONPATH pipetask run \
    -b /sdf/group/lsst/camera/IandT/repo_gen3/spot_test_v2 \
    -i LSSTCam/raw/all,LSSTCam/calib,/calib/run_12781 \
    -d "instrument='LSSTCam' AND exposure.observation_type='spot' AND exposure.science_program IN ( '12784', '12785', '12788', '12789' ) AND detector in ( 28, 29, 96 )" \
    -o u/youtsumi/spot/1st \
    -p /u/ki/youtsumi/gpfs/Spot/cpSpot2.yaml \
    --register-dataset-types -j 8
